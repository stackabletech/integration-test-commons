= Changelog

== 0.4.0 - unreleased

:15: https://github.com/stackabletech/integration-test-commons/pull/15[#15]
:19: https://github.com/stackabletech/integration-test-commons/pull/19[#19]
:21: https://github.com/stackabletech/integration-test-commons/pull/21[#21]
:22: https://github.com/stackabletech/integration-test-commons/pull/22[#22]

=== Added
* list_config_maps via label selector ({21}).
* list_pods `LabelSelector` now has `stackable_operator::labels::APP_INSTANCE_LABEL` for cluster name ({21}).

=== Changed
* `BREAKING [Operator]`: All `TestCluster` "get_" methods renamed to "list_" ({21}).
* `BREAKING [Operator]`: Renamed `pod_name_label` to `cluster_type` ({21}).
* `kube-rs`: `0.57` → `0.58` ({15}).
* `tokio`: `1.8` → `1.10` ({21}).
* Added operator checks for pod version (label) and pod creation timestamps ({19}).
* Improved operator logging output (messages are prefixed with [<Kind>/<Name>]) ({19}).
* Sorted `TestCluster` (except `TestCluster::new()`) methods alphabetically ({21}).

=== Fixed
* `test::kube::KubeClient::get_annotation` listens not only on `Added`
  events but also on `Modified` events ({22}).

== 0.3.0 - 2021-07-13

:8: https://github.com/stackabletech/integration-test-commons/pull/8[#8]
:9: https://github.com/stackabletech/integration-test-commons/pull/9[#9]
:10: https://github.com/stackabletech/integration-test-commons/pull/10[#10]
:11: https://github.com/stackabletech/integration-test-commons/pull/11[#11]

=== Removed
* Kubernetes version feature removed from the k8s-openapi dependency. It
  must be set by the binary crate which uses this library ({10}).

=== Fixed
* Add synchronization to create the integration test repository only once per test file ({8}, {11}).

=== Changed
* `k8s-openapi`: `0.11` → `0.12` ({9}).
* `kube-rs`: `0.56` → `0.57` ({9}).
* `tokio`: `1.6` → `1.8` ({9}).

== 0.2.0 - 2021-06-22

:4: https://github.com/stackabletech/integration-test-commons/pull/4[#4]
:5: https://github.com/stackabletech/integration-test-commons/pull/5[#5]

=== Added
* TestCluster merged from spark-operator-integration-tests and zookeeper-operator-integration-tests ({4}).
* `test::kube::KubeClient::verify_status` and `test::kube::KubeClient::get_status` added ({5}).
* All modules in `k8s_openapi::api::core::v1` re-exported in `test::prelude` ({5}).

=== Fixed
* Race conditions in `test::kube::KubeClient` fixed ({5}).

=== Changed
* `kube-rs`: `0.52` → `0.56` ({4}).
* `test::kube::Timeouts::verify_pod_condition` renamed to `verify_status` ({5}).


== 0.1.0 - 2021-06-10

:2: https://github.com/stackabletech/integration-test-commons/pull/2[#2]

=== Added
* Module `test` copied and merged from agent-integration-tests, spark-operator-integration-tests, and zookeeper-operator-integration-tests ({2}).
* Crate documented ({2}).
* Unit tests created ({2}).

=== Fixed
* Doctests fixed ({2}).

=== Changed
* `kube-rs`: `0.0 → `0.52` ({2}).
* `KubeClient::find` renamed to `KubeClient::find_namespaced` ({2}).
* `KubeClient::find_crd` generalized and renamed to `KubeClient::find` ({2}).
